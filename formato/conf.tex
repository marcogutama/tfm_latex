\makeatletter
    \protected\def\autorv{\@author}
    \xdef\titulov{\@title}
    \xdef\masterv{\@master}
    \xdef\fechav{\@date}
    \xdef\universidadv{\@universidad}
    \xdef\escuelav{\@escuela}
    \xdef\tipoTesisv{\@tipoTesis}
    \xdef\directorv{\@director}
    \xdef\ciudadv{\@ciudad}
\makeatother

%Referencias 
\usepackage{footmisc}
\usepackage{hyperref}
\hypersetup{
    pdftitle={\titulov},
    %pdfauthor={\autorv},
    pdfsubject={\masterv},
    pdfpagemode={UseOutlines},
    bookmarksopen=true,
    bookmarksopenlevel=0,
    hypertexnames=false,
    colorlinks=true,
    pdfborder={0 0 0},
    citecolor=blue,
    linkcolor=blue,
    urlcolor=blue,
    pdfstartview={FitV},
    breaklinks=true
}

%Metadatos
\usepackage{hyperxmp}     
\AtBeginDocument{\hypersetup{pdfkeywords={\keywordsESv}}}


%Tablas (líneas horizonales toprule,bottomrule,midrule)
\usepackage{booktabs}

%Estructura del documento
\usepackage[toc,page,title,titletoc]{appendix}
\renewcommand*\appendixpagename{Apéndices}

%Idioma
\usepackage[spanish]{babel}
\addto\captionsspanish{\renewcommand{\tablename}{Tabla}}
\addto\captionsspanish{\renewcommand{\listtablename}{Índice de Tablas}}

%Color azul UNIR
\usepackage[dvipsnames]{xcolor}
\definecolor{azul}{RGB}{81, 131, 187}
\def\azul{\color{azul}}
\def\an{\bfseries\azul}

%Márgenes UNIR
\RequirePackage{geometry}
\geometry{
	paper=a4paper,  
	left=3.5cm,
	right=1.5cm,
	top=2.5cm, 
	bottom=2.5cm,
	headheight=0.75cm,
	headsep=1.5cm,
	footskip=1.5cm,
	%showframe, % Ver marcos
}
\usepackage{tabularx} % para tablas con anchos ajustables
\usepackage{booktabs} % para un diseño más limpio y profesional de las tablas
% Cabeceras y pies de página UNIR
\usepackage{lastpage}
\usepackage{fancyhdr}
\usepackage{tikz}
\pagestyle{fancy}
\patchcmd{\chapter}{\thispagestyle{plain}}{\thispagestyle{fancy}}{}{}

\fancypagestyle{mainmatter}{%
    \fancyhead{}%
    \lhead{\color{azul}M. Gutama, J. Peñaranda}%
    \chead{}%
    \rhead{\masterv}%
    \cfoot{}%
    \rfoot{\thepage\ of \getpagerefnumber{LastPage}}}

\fancypagestyle{frontmatter}{%
    \fancyhead{}%
    \lhead{\color{azul}M. Gutama, J. Peñaranda}%
    \chead{}%
    \rhead{\masterv}%
    \cfoot{}%
    \rfoot{\thepage}}

% Necesario para forzar encabezados y pies de página en la primera página de cada    
%\usepackage{etoolbox}      
\usepackage{setspace} % Espaciado entre líneas
\setstretch{1.5}
\usepackage[autostyle=true]{csquotes} % Referencias en UTF8

% Dependiendo del compilador se utilizan fuentes true type o fuentes convertidas (TFM)
\usepackage{array}
\usepackage{ifluatex,ifxetex}
\ifnum\ifluatex1\else\ifxetex1\else0\fi\fi
    =1 %
    \input{formato/fuentes/confTTF}
\else
    \input{formato/fuentes/confTFM}
\fi

%--- Portada ---%
\renewcommand*{\maketitle}{%
    \begin{titlepage}%
        {\flushleft%
            {\includegraphics[width=8.18cm]{./contenido/imagenes/logo-UNIR.pdf}}\par
        }%
        \vspace{1cm}
        \begin{table}[h!]
        \hyphenpenalty=10000
        \setlength\arrayrulewidth{2pt}
            \begin{tabularx}{14.5cm}{ L{0.074} !{\color{azul}\vline}  L{0.931} }
                & \\
                & \fontsize{14}{14}\selectfont \georgiab \universidadv\\
                & \\
                & \fontsize{18}{18}\selectfont \georgiab \escuelav \\
                & \\
                & \fontsize{14}{14}\selectfont  \georgiab\masterv \\
                & \\ & \\ & \\
                & \fontsize{34}{34}\selectfont \cambriamd \color{azul}   \titulov \\

            \end{tabularx}
        \end{table}
        \vspace{0.5cm}
        {\flushleft \fontsize{11}{11}\selectfont %
            \georgiab \tipoTesisv\par
                \vspace{0.5cm}
                Presentado por: \georgiamd \autorv \par
                \vspace{0.5cm}
                \georgiab Director: \georgiamd \directorv \par
                \vspace{3cm}
                {\color{azul}%
                \georgiab Ciudad: \georgiamd \ciudadv \par
                \georgiab Fecha: \georgiamd \fechav \par}
        }
    \end{titlepage}}
% COnfiguracion para imprimir codigo
\usepackage{listings}
\usepackage{xcolor}
\usepackage{lmodern} % Fuente moderna

% Configuración de listings para código
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.95}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2,
    inputencoding=utf8,                 % <--- NUEVO
    extendedchars=true,                 % <--- NUEVO
    literate=                           % <--- NUEVO
      {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
      {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
      {ñ}{{\~n}}1 {Ñ}{{\~N}}1
      {¿}{{?``}}1 {¡}{{!``}}1
}

\lstset{style=mystyle}
% Se requiere el paquete \usepackage{amssymb} para \checkmark
% Se requiere el paquete \usepackage{pifont} para \ding{55}
% Se requiere el paquete \usepackage{xcolor} para los colores
\usepackage{amssymb}
\usepackage{pifont}
\usepackage{xcolor}